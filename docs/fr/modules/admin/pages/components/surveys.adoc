= Enquête

== En bref

La fonctionnalité Enquête permet aux participant·e·x·s de répondre à des questionnaires. Ceci est utile lorsqu'une organisation souhaite recevoir des retours privés
de la part des participant·e·x·s. Il permet de définir un ensemble de questions avec plusieurs types de réponses.

NOTE: Une fois l'enquête complétée par les participant·e·x·s, il n'est pas possible de modifier les questions, car cela affecterait l'intégrité
des réponses. Pour modifier les questions, il faut créer une nouvelle enquête et supprimer la version originale.

image::components/surveys/example01.png[Example of a survey]

== Configuration

=== Créer une fonctionnalité Enquête

Pour créer une fonctionnalité Enquête, aller d'abord dans xref:admin:spaces.adoc[espace participatif] à l'endroit de création souhaité.

image::components/surveys/component_survey.png[Add Survey component button]

Ensuite :

. Cliquer sur l'élément "Fonctionnalités" dans le menu secondaire
. Cliquer sur "Ajouter une fonctionnalité"
. Sélectionnez "Enquête"
. Remplir le formulaire de création de fonctionnalité

Il est toujours possible de mettre à jour ce formulaire et la configuration après avoir créé la fonctionnalité, en cliquant sur image:icons/action_configure.png[Icône Configurer] dans la liste des fonctionnalités.

image::components/surveys/component.png[Add component form]

.Ajouter une fonctionnalité : formulaire d'enquête
[cols="20h,10h,~"]
|===
|Champ |Type |Description

|Nom
|Obligatoire
|Titre de cette fonctionnalité.

|Rang d'affichage
|Facultatif
|Position de la fonctionnalité par rapport aux autres fonctionnalités. Avoir un nombre inférieur signifie un rang d'affichage plus élevé.
Par exemple, si vous avez deux fonctionnalités, "Fonctionnalité a" de poids "10" et "Fonctionnalité b" de poids "0"
alors "Fonctionnalité b" est placée avant dans le listage.
|===

.Ajouter une fonctionnalité : Formulaire d'enquête - Paramètres généraux
[cols="20h,10h,~"]
|===
|Champ |Type |Description

|Portées activées
|Facultatif
|Cochez cette case si vous voulez que le filtrage des secteurs dans cette fonctionnalité.

|Secteur
|Facultatif
|Cette fonctionnalité appartient à xref:admin:settings/scopes.adoc[Scopes].

|Réponses acceptées de
|Facultatif
|Date de début de la réception des réponses. Laisser vide pour aucune date spécifique. Format attendu : jj/mm/aaaa hh:mm.

|Réponses acceptées jusqu'au
|Facultatif
|Date de fin de réception des réponses Laisser vide pour aucune date spécifique. Format attendu : jj/mm/aaaa hh:mm.

|Annonce
|Facultatif
|Une annonce générale visible sur la page de l'enquête.

|Supprimer les réponses lors de la publication du sondage
|Facultatif
|Cocher cette case pour supprimer les réponses lorsque l'enquête est publiée. Utile pour tester l'enquête avant de la publier.
|===

.Ajouter une fonctionnalité : Formulaire d'enquête - Paramètres d'étape
[cols="20h,10h,~"]
|===
|Champ |Type |Description

|Autoriser les réponses
|Facultatif
|Cocher cette case pour recevoir des réponses de cette enquête pour cette étape.

|Autoriser les utilisateur·ices non enregistré·e·x·s à répondre à l'enquête
|Facultatif
|Si activé, aucune connexion n'est requise pour répondre à l'enquête. Cela peut entraîner des données de mauvaise qualité ou peu fiables et vous rendre plus vulnérable aux
attaques automatisées. À utiliser avec prudence. N'oubliez pas que cette option ne permet qu'une réponse par session du navigateur,
mais les participant·e·x·s peuvent utiliser l'option de navigation privée et faire plusieurs réponses avec le même appareil.

|Annonce
|Facultatif
|Une annonce générale visible sur la page du tirage pour cette étape.
|===

=== Créer une enquête

NOTE: Avez-vous des enquêtes répétitives ? Par exemple, le même formulaire de rétroaction pour chaque processus ? Il est possible de dupliquer l'enquête et la sauvegarder comme modèle pour ne pas devoir reconfigurer une même enquête à chaque fois. En savoir plus
sur xref:admin:templates/questionnaires.adoc[Modèles de questionnaires].

image::components/surveys/edit_questionnaire.png[Choose template form]

Tout d'abord, sélectionner un xref:admin:templates/questionnaires.adoc[modèles de questionnaires] si vous le souhaitez, ou passez cette étape.

Ensuite, il faut remplir le formulaire avec les champs suivants :

image::components/surveys/edit_form.png[Edit survey form]

.Nouveau formulaire d'enquête
[cols="20h,10h,~"]
|===
|Champ |Type |Description

|Titre
|Obligatoire
|Le titre de cette enquête.

|Description
|Facultatif
|La description de l'enquête.

|Conditions d'utilisation
|Obligatoire
|Les conditions légales que les participant·e·x·s doivent remplir pour répondre à l'enquête.
|===

=== Questions

==== Ajouter une question

Ensuite, clique sur "Ajouter une question" pour créer l'enquête.
Vous pouvez ajouter plusieurs questions par sondage, et les réorganiser ou les supprimer.

Chaque question doit avoir une instruction et un type au minimum.

image::components/surveys/question_form.png[Question form on survey creation]

.Ajouter un formulaire de question
[cols="20h,10h,~"]
|===
|Champ |Type |Description

|Relevé
|Obligatoire
|La question elle-même. Par exemple, "Quelle est votre catégorie d'âge?"

|Description
|Facultatif
|Informations complémentaires sur la question si nécessaire.

|Mandatory
|Facultatif
|À cocher dans le cas où les participant·e·x·s doivent répondre à cette question pour compléter l'enquête.

|Limite de caractères
|Facultatif
|Limite du nombre de caractères de la question. Laisser à 0 si aucune limite. Compatible avec les types de questions à réponse courte et longue.

|Type
|Obligatoire
|Une des réponses suivantes : réponse courte, réponse longue, option simple, option multiple, tri des fichiers, matrice (option unique)
ou Matrice (option multiple). Voir xref:_question_types[Types de questions] pour plus d'informations.
|===

image::components/surveys/question_form_backend.png[]

image::components/surveys/question_form_frontend.png[]

==== Types de questions

.Types de questions (cliquez pour voir les images en détail)
[cols="10h,~,~,~"]
|===
|Type |Frontend |Backend |Description

|Réponse courte
|image:components/surveys/type_short_answer_frontend.png[Type de réponse courte - frontend,link=../_images/components/surveys/type_short_answer_frontend.png]
|image:components/surveys/type_short_answer_backend.png[Type de réponse courte - backend,link=../_images/components/surveys/type_short_answer_backend.png]
|Compatible avec la validation "Limite de caractères"

|Réponse longue
|image:components/surveys/type_long_answer_frontend.png[Type de réponse longue - frontend,link=../_images/components/surveys/type_long_answer_frontend.png]
|image:components/surveys/type_long_answer_backend.png[Type de réponse longue - backend,link=../_images/components/surveys/type_long_answer_backend.png]
|Compatible avec la validation "Limite de caractères"

|Option simple
|image:components/surveys/type_single_option_frontend.png[Type d'option simple - frontend,link=../_images/components/surveys/type_single_option_frontend.png]
|image:components/surveys/type_single_option_backend.png[Type d'option unique - backend,link=../_images/components/surveys/type_single_option_backend.png]
|Les participant·e·x·s doivent choisir une seule option, avec des boutons radio. Ajoutez au moins 2 options de réponse.
Il est possible de définir une option "Texte libre" pour que les participant·e·x·s soumettent leur propre réponse.

|Options multiples
|image:components/surveys/type_multiple_option_frontend.png[Type d'option multiple - frontend,link=../_images/components/surveys/type_multiple_option_frontend.png]
|image:components/surveys/type_multiple_option_backend.png[Type d'option multiple - backend,link=../_images/components/surveys/type_multiple_option_backend.png]
|Les participant·e·x·s peuvent choisir plusieurs options, avec des cases à cocher. Ajoutez au moins 2 options de réponse. Il est possible d'ajouter une validation,
avec un nombre maximum de choix. Il est possible de définir une option "Texte libre" pour que les participant·e·x·s soumettent leur propre réponse.

|Tri en cours
|image:components/surveys/type_sorting_frontend.png[Type de tri - frontend,link=../_images/components/surveys/type_sorting_frontend.png]
|image:components/surveys/type_sorting_backend.png[Type de tri - backend,link=../_images/components/surveys/type_sorting_backend.png]
|Ajoutez au moins 2 options de réponse. Les participant·e·x·s peuvent faire glisser et déposer les options de réponse pour les ordonner.

|Fichiers
|image:components/surveys/type_files_frontend.png[Type de fichiers - frontend,link=../_images/components/surveys/type_files_frontend.png]
|image:components/surveys/type_files_backend.png[Type de fichiers - backend,link=../_images/components/surveys/type_files_backend.png]
|Permettre aux participant·e·x·s de télécharger des fichiers.

|Matrice (option Single)
|image:components/surveys/type_matrix_single_option_frontend.png[Type de matrice (Single option) - frontend,link=../_images/components/surveys/type_matrix_single_option_frontend.png]
|image:components/surveys/type_matrix_single_option_backend.png[Type de matrice (Single option) - backend,link=../_images/components/surveys/type_matrix_single_option_backend.png]
|Les participant·e·x·s doivent choisir entre les lignes et les colonnes d'options simples, avec les boutons radio.

|Matrice (option multiple)
|image:components/surveys/type_matrix_multiple_option_frontend.png[Matrice (option multiple) type - frontend,link=../_images/components/surveys/type_matrix_multiple_option_frontend.png]
|image:components/surveys/type_matrix_multiple_option_backend.png[Type de matrice (option multiple) - backend,link=../_images/components/surveys/type_matrix_multiple_option_backend.png]
|Les participant·e·x·s doivent choisir entre des lignes et des colonnes d'options multiples, avec des cases à cocher.
|===

==== Questions conditionnelles

Une fois l'enquête enregistrées, un bouton "Ajouter une condition d'affichage" apparait dans les blocs de questions.
Cette fonctionnalité permet aux administrateur·ices de créer des enquêtes complexes, c'est-à-dire que certaines questions s'affichent seulement si les participant·e·x·s ont sélectionné certaines réponses spécifiques aux questions précédentes.

TIP: Les questions conditionnelles peuvent être difficiles à configurer, alors assurez-vous de tester le comportement de l'enquête avant de la publier.

image::components/surveys/conditional_question.png[Display condition in backend]

.Formulaire Ajouter une condition d'affichage
[cols="20h,10h,~"]
|===
|Champ |Type |Description

|Question
|Obligatoire
|La question précédente est la condition pour afficher cette question.

|Condition
|Obligatoire
|Définir la condition nécessaire à l'affichage de cette question.

|Option de réponse
|Obligatoire
|Ce champ propose les options de réponse aux questions qui doivent être choisies par les participant·e·x·s pour remplir la condition.
Disponible uniquement pour les conditions "Égal" et "Pas Égal".

|Texte inclus
|Obligatoire
|Uniquement disponible pour les conditions "Inclus le texte".

|Cette condition doit toujours être satisfaite indépendamment du statut des autres conditions
|Facultatif
|Vérifier si cette condition est essentielle, même si d'autres conditions rendent l'affichage de la question possible.
|===

=== Séparateurs

Il est aussi possible d'ajouter des séparateurs entre les questions, lorsque vous avez une longue enquête ou des sujets différents.
Ils permettent d'afficher les questions des formulaires en différentes étapes.

Les séparateurs ne peuvent être triés ou supprimés.

image::components/surveys/separator.png[Separator in front end]

=== Titre et description

Il est possible d'ajouter une section titre et description, pour apporter de la clarté au formulaire et le séparer en différentes sections.
Cette option, associée à des séparateurs, permet de donner des titres et des descriptions aux étapes de l'enquête.
Elle peut également être utilisée seule, dans une enquête d'une page.

image::components/surveys/title_description_backend.png[Title and description in back end]

=== Exporter les réponses

Il est possible d'exporter les réponses des participant·e·x·s à l'enquête dans différents formats : CSV, JSON, XLSX (Excel) ou PDF.
L'exportation n'inclue pas les données des utilisateur·ices. Pour les collecter, assurez-vous de créer des questions d'enquête spécifiques à ces données.

NOTE: La plateforme ne gère pas le traitement des réponses ni la présentation des résultats ou le résumé aux utilisateur·ices. Il est nécessaire de le faire en dehors de l'exportation.

== Exemples

Quelques exemples d'utilisation de cette fonctionnalité :

* https://consultation.quebec.ca/processes/donneesquebec/f/82/[Données Québec: participer à son amélioration dans les consultations du Québec]