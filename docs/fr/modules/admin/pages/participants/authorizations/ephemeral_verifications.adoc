= Vérifications éphémères

== En bref

Dans Decidim, il y a principalement deux types de participant·e·x·s :

- Participant·e·x·s uniques : Les utilisateur·ices qui accèdent à la plateforme pour une action unique, comme le vote dans les budgets participatifs et ne reviennent plus.
- Participant·e·x·s récurrent·e·x·s : Utilisateur·ices qui s’engagent régulièrement dans différents processus participatifs.

Pour les participant·e·x·s ponctuel·e·x·s, le processus d’inscription et de vérification peut être un obstacle, menant à une participation incomplète. Pour ce faire, Decidim introduit la méthode de vérification éphémère, permettant aux utilisateur·ices de vérifier leur identité et de participer sans créer de compte.

La méthode de vérification éphémère est conçue pour simplifier la participation des utilisateur·ices uniques en permettant la vérification directe sans nécessiter la création de compte.

NOTE: Cette fonctionnalité est pensée pour un processus participatif spécifique limité dans le temps, tel le vote d'un budget participatif.

=== Comment ça marche ?

Cette fonctionnalité permet aux participant·e·x·s de participer sans s'inscrire sur la plateforme, en vérifiant leur identité avec le système choisi par l'organisation. Les principales caractéristiques sont :

- **Vérification directe sans inscription :** Les participant·e·x·s peuvent vérifier elleux-mêmes et compléter leur action sans s'inscrire.
- **Configurable au niveau d'un composant :** Les administrateurs peuvent activer ou désactiver la vérification éphémère pour des composants spécifiques, car toutes les méthodes d'autorisation fonctionnent.
- **Session éphémère** : Une session temporaire est ouverte lorsque les participant·e·x·s sont vérifié·e·x·s. Cette session permettra uniquement aux participant·e·x·s de compléter des actions dans la fonctionnalité spécifique. Si l'utilisateur·ice éphémère veut quitter la fonctionnalité, la session sera fermée.
- **Mode Focus :** Un mode focus est activé lorsque vous faites l'action restreinte par vérification éphémère, lae participant·e·x est dongardé·e·x·s au centre de l'action principale.
- **Lien vers une méthode de vérification existante :** La vérification éphémère doit être liée à une méthode de vérification préexistante (par exemple un recensement organisationnel).
- **Révoquer les vérifications préalables :** Lorsque vous activez la vérification éphémère, toutes les vérifications précédentes sont révoquées pour éviter les conflits de vérification.
- **Récupération de la session éphémère**. Les participant·e·x·s éphémères peuvent vérifier à nouveau et se connecter avec la session éphémère. Iels peuvent donc voir leurs votes et les modifier.

== Configuration

Pour activer la vérification éphémère, vous devez suivre ces étapes :

1. Accès au panneau système.
1. Activer la méthode de vérification éphémère.
1. Associer la vérification à une méthode de vérification existante (par exemple le recensement de l'organisme).
1. Accéder au tableau de bord de l'administration.
1. Activer les autorisations de vérification éphémère dans une fonctionnalité.
1. Confirmer l'action, qui révoquera toutes les vérifications en cours.
1. Super! Vous avez activé la vérification éphémère pour une fonctionnalité spécifique.

== Exemples

Pour mieux comprendre le fonctionnement de cette fonctionnalité, nous expliquons les différents flux et cas limites comme suit :

=== Flux 1 : Visiteur·euse non enregistré·e·x

1. En tant que visiteur·euse non enregistré·e·x, je clique sur l'action restreinte
1. Ensuite, je suis invité·e·x à remplir le formulaire de vérification avec mes données
1. Je suis vérifié avec succès
1. Ensuite, une session temporaire est ouverte
1. J'accède à l'action restreinte
1. Lorsque j'ai terminé la tâche (c'est-à-dire voter pour un budget participatif). Puis je peux quitter le mode focus et la session temporaire sera fermée.

=== Flow 2 : Participant·e·x enregistré·e·x avec une session connectée

1. En tant que participant·e·x inscrit·e·x connecté·e·x, je clique sur l'action restreinte
1. Ensuite, je suis invité·e·x à remplir le formulaire de vérification avec mes données
1. Je suis vérifié avec succès
1. Puis j'accède à l'action restreinte
1. La vérification est enregistrée dans mon profil

=== Cas limites

==== Flux 3 : Prévention des conflits de vérification

1. En tant que visiteur·euse, j'essaie de vérifier en utilisant les données d'unx participant·e·x inscrit·e·x qui a déjà été vérifié·e·x.
1. Le système détecte un conflit de vérification.
1. Je ne peux pas procéder à la vérification.

==== Flux 4 : Fusion des comptes éphémères et enregistrés

1. Utilisateur·euse éphémère, qui a terminé le processus de vote. Clôturer session éphémère.
1. S'inscrire sur la plateforme.
1. Essayez de vous vérifier en utilisant les mêmes renseignements personnels.
1. Le système récupère et fusionne vos données utilisateur·euse éphémères avec votre nouveau compte enregistré.
1. Vous pouvez maintenant voir et modifier vos votes.

=== Comment fonctionne la session éphémère ?

1. Cette session vous permettra uniquement de faire des actions dans la fonctionnalité spécifique. Si l'utilisateur·ice éphémère veut quitter la fonctionnalité, la session sera fermée.
1. La session sera fermée après une période d'inactivité.
1. La session peut être récupérée. Cela signifie que si j'essaie de vérifier à nouveau en utilisant les mêmes données, alors ma session sera récupérée, et je pourrai voir et modifier mes votes.