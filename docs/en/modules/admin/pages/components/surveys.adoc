= Survey

== Understand the basics

The Survey component allows participants to answer questionnaires. This is useful when an organization wants to receive private
feedback from participants. It allows defining a set of questions with multiple kinds of answers.

NOTE: Once a survey is answered by participants, it's not possible to modify its questions, as that would affect the integrity
of the answers. If you need to modify the questions, create a new survey and unpublish the original one.

image::components/surveys/example01.png[Example of a survey]

== Configuration

=== Create a survey component

To create a Survey component, first go in the xref:admin:spaces.adoc[participatory space] where you want to create it. 

image::components/surveys/component_survey.png[Add Survey component button]

Then:

. Click on the "Components" item in the secondary menu
. Click the "Add component" button
. Select "Survey"
. Fill the component creation form

You can still update this form and the configuration after creating the component, by clicking the 
image:icons/action_configure.png[Configure icon] Configure icon in the components list. 

image::components/surveys/component.png[Add component form]

.Add component: Survey form
[cols="20h,10h,~"]
|===
|Field |Type |Description

|Name
|Required
|Title of this component.

|Order position
|Optional
|The order of the component in relation with the other components. Having a lower number means a higher priority. 
For instance, if you have two components, "Component a" with weight "10" and "Component b" with weight "0" 
then "component b" is first when ordering.

|===

.Add component: Survey form - Global settings
[cols="20h,10h,~"]
|===
|Field |Type |Description

|Scopes enabled
|Optional
|Check if you want to have Scopes filtering in this component.

|Scope
|Optional
|Which xref:admin:settings/scopes.adoc[Scopes] does this component belongs to.

|Answers accepted from
|Optional
|Start date when you want to start receiving answers. Leave blank for no specific date. Expected format: dd/mm/yyyy hh:mm.

|Answers accepted until
|Optional
|End date when you want to stop receiving answers. Leave blank for no specific date. Expected format: dd/mm/yyyy hh:mm.

|Announcement
|Optional
|A general announcement visible on the survey page.

|Delete answers when publishing the survey
|Optional
|Check if you want to delete answers when the survey is published. Useful for testing the survey before publishing it.

|===

.Add component: Surveys form - Step settings
[cols="20h,10h,~"]
|===
|Field |Type |Description

|Allow answers
|Optional
|Check if you want to receive answers in this survey for this phase. 

|Allow unregistered users to answer the survey
|Optional
|If active, no login is required to answer the survey. This may lead to poor or unreliable data and make you more vulnerable to 
automated attacks. Please use with caution. Mind that this option only allows an answer by browser session,
but participants can use the Private navigation option and make multiple answers with the same device.

|Announcement
|Optional
|A general announcement visible on the survey page for this phase.

|===

=== Create a survey

NOTE: Do you have repetitive surveys? For instance the same feedback form for every process? You can have a survey that
gets copied and is used as a blueprint so you don't have to manually configure the same survey each time. Learn more
on xref:admin:templates/questionnaires.adoc[Questionnaires templates].

image::components/surveys/edit_questionnaire.png[Choose template form]

First, select a xref:admin:templates/questionnaires.adoc[Questionnaires templates] if you want, or Skip this step.

Then you need to fill the form with the following fields:

image::components/surveys/edit_form.png[Edit survey form]

.New survey form
[cols="20h,10h,~"]
|===
|Field |Type |Description

|Title
|Required
|The title of this survey.

|Description
|Optional
|The description of the survey.

|Terms of service
|Required
|Legal conditions that the participants must meet to answer the survey.

|===

=== Questions

==== Add a question

Then, click the "Add question" button to start creating your survey. 
You can add multiple questions per survey, and reorder or delete them.

Every question must have a statement and a type as a minimum.

image::components/surveys/question_form.png[Question form on survey creation]

.Add question form
[cols="20h,10h,~"]
|===
|Field |Type |Description

|Statement
|Required
|The question itself. For instance, "What is your age category?"

|Description
|Optional
|Additional information on the question if needed.

|Mandatory
|Optional
|Check if participants must answer this question to complete the survey.

|Character limit
|Optional
|The maximum characters the answer can have. Leave to 0 if no limit. Compatible with Short and Long answer question types.

|Type
|Required
|One of the following: Short answer, Long answer, Single option, Multiple option, Sorting, Files, Matrix (Single option)
or Matrix (Multiple option). See xref:_question_types[Question types] for more information.

|===

image::components/surveys/question_form_backend.png[]

image::components/surveys/question_form_frontend.png[]

==== Questions types

.Question types (click to view images in detail)
[cols="10h,~,~,~"]
|===
|Type|Frontend |Backend |Description

|Short answer
|image:components/surveys/type_short_answer_frontend.png[Short answer type - frontend,link=../_images/components/surveys/type_short_answer_frontend.png]
|image:components/surveys/type_short_answer_backend.png[Short answer type - backend,link=../_images/components/surveys/type_short_answer_backend.png]
|Compatible with "Character limit" validation

|Long answer
|image:components/surveys/type_long_answer_frontend.png[Long answer type - frontend,link=../_images/components/surveys/type_long_answer_frontend.png]
|image:components/surveys/type_long_answer_backend.png[Long answer type - backend,link=../_images/components/surveys/type_long_answer_backend.png]
|Compatible with "Character limit" validation

|Single option
|image:components/surveys/type_single_option_frontend.png[Single option type - frontend,link=../_images/components/surveys/type_single_option_frontend.png]
|image:components/surveys/type_single_option_backend.png[Single option type - backend,link=../_images/components/surveys/type_single_option_backend.png]
|Participants have to choose a single option, with radio buttons. Add at least 2 answer options. 
It's possible to define a "Free text" option, for participants to submit their own answer.

|Multiple option
|image:components/surveys/type_multiple_option_frontend.png[Multiple option type - frontend,link=../_images/components/surveys/type_multiple_option_frontend.png]
|image:components/surveys/type_multiple_option_backend.png[Multiple option type - backend,link=../_images/components/surveys/type_multiple_option_backend.png]
|Participants can choose multiple options, with checkboxes. Add at least 2 answer options. It's possible to add a validation, 
with the maximum number of choices. It's possible to define a "Free text" option, for participants to submit their own answer.

|Sorting
|image:components/surveys/type_sorting_frontend.png[Sorting type - frontend,link=../_images/components/surveys/type_sorting_frontend.png]
|image:components/surveys/type_sorting_backend.png[Sorting type - backend,link=../_images/components/surveys/type_sorting_backend.png]
|Add at least 2 answer options. Participants can drag and drop answer options to order them. 

|Files
|image:components/surveys/type_files_frontend.png[Files type - frontend,link=../_images/components/surveys/type_files_frontend.png]
|image:components/surveys/type_files_backend.png[Files type - backend,link=../_images/components/surveys/type_files_backend.png]
|Allow participants to upload files.

|Matrix (Single option)
|image:components/surveys/type_matrix_single_option_frontend.png[Matrix (Single option) type - frontend,link=../_images/components/surveys/type_matrix_single_option_frontend.png]
|image:components/surveys/type_matrix_single_option_backend.png[Matrix (Single option) type - backend,link=../_images/components/surveys/type_matrix_single_option_backend.png]
|Participants have to choose between rows and columns of single options, with radio buttons.

|Matrix (Multiple option)
|image:components/surveys/type_matrix_multiple_option_frontend.png[Matrix (Multiple option) type - frontend,link=../_images/components/surveys/type_matrix_multiple_option_frontend.png]
|image:components/surveys/type_matrix_multiple_option_backend.png[Matrix (Multiple option) type - backend,link=../_images/components/surveys/type_matrix_multiple_option_backend.png]
|Participants have to choose between rows and columns of multiple options, with checkboxes.

|===

==== Conditional questions

Once you saved your survey, you can see that a new "Add display condition" button is added in the questions blocks. 
This feature allows administrators to create complex surveys with conditionality, meaning that some questions are displayed
only if participants chose a specific answer in the previous questions. 

TIP: Conditional questions can be difficult to configure, so be sure to test the survey behaviour before publishing it. 

image::components/surveys/conditional_question.png[Display condition in backend]

.Add display condition form
[cols="20h,10h,~"]
|===
|Field |Type |Description

|Question
|Required
|The previous question that is the condition for displaying this question. 

|Condition
|Required
|To define the condition needed for this question to be displayed.

|Answer option
|Required
|This field propose the answer options to the questions that need to be chose by participants to realize the condition. 
Only available for "Equal" and "Not Equal" conditions. 

|Included text
|Required
|Only available for "Includes text" conditions. 

|This condition needs to be satisfied always regardless the status of other conditions
|Optional
|Check if this condition is essential, even if other conditions would make the display of the question possible. 

|===

=== Separators

You can also add separators between questions, when you have a long survey or different topics. 
They allow to display the forms questions in different steps. 

Separators can only be ordered or deleted.

image::components/surveys/separator.png[Separator in front end]

=== Title and description

You can also add a title and description section, to bring clarity to the form and separate it in different sections. 
Coupled with separators, they allow to give titles and descriptions to the survey steps. 
They can also be used alone, in a one page survey. 

image::components/surveys/title_description_backend.png[Title and description in back end]

=== Export answers

It's possible to export the survey participant answers to different formats: CSV, JSON, XLSX (Excel) or PDF.
It doesn't export user data, so if you need to collect it, make sure to create dedicated survey questions.

NOTE: The platform doesn't handle the answers processing nor presenting results or summary to the users, that need to be
done externally.

== Examples

Some examples of where this component is used:

* https://consultation.quebec.ca/processes/donneesquebec/f/82/[Data Quebec: participate in its improvement in Qu√©bec consultations]
